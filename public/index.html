<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        .wireframed {
            outline: 1px solid black;
        }

        .subframed {
            outline: 1px dashed black;
        }

        .wire-image {
            outline: 1px dotted black;
            background: url(placeholder.png);
            background-size: 100% 100%;
            width: 100%;
            height: 200px;
        }
    </style>
</head>

<body>
    <header>
        <div class="wireframed title">
            <h1>Catci.net</h1>
        </div>
        <div class="wireframed cables">
            <div class="wireframed cable audio-left"></div>
            <div class="wireframed cable audio-right"></div>
            <div class="wireframed cable video"></div>
        </div>
    </header>
    <div class="root">
        <aside class="sidebar">
            <nav class="wireframed navigation">
                <ul class="wireframed">
                    <li class="subframed">
                        <ul class="internal">
                            <li>
                                <h3>Internal</h3>
                            </li>
                            <li><a href="index.html">Home</a></li>
                            <li><a href="projects.html">Projects</a></li>
                            <li><a href="blog.html">Blog</a></li>
                            <li><a href="about.html">About</a></li>
                            <li><a href="contact.html">Contact</a></li>
                        </ul>
                    </li>
                    <li class="subframed">
                        <ul class="external">
                            <li>
                                <h3>External</h3>
                            </li>
                            <li><a href="#" target="_blank" rel="noopener">GitHub</a></li>
                            <li><a href="#" target="_blank" rel="noopener">Guestbook</a></li>
                            <li><a href="#" target="_blank" rel="noopener">Twitter</a></li>
                            <li><a href="#" target="_blank" rel="noopener">Bluesky</a></li>
                            <li><a href="#" target="_blank" rel="noopener">Itch.io</a></li>
                            <li><a href="#" target="_blank" rel="noopener">Patreon</a></li>
                            <li><a href="#" target="_blank" rel="noopener">Mastodon</a></li>
                            <li><a href="#" target="_blank" rel="noopener">Last.fm</a></li>
                            <li><a href="mailto:hello@catci.net" target="_blank" rel="noopener">hello@catci.net</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </aside>
        <main>
            <div class="m-row">
                <div class="intro wireframed">
                    <div class="crt-container wireframed">
                        <div class="crt-bevel wireframed">
                            <div class="crt-screen wireframed">
                                <div class="content subframed">
                                    <h2>Welcome to Catci.net!</h2>
                                    <div class="c-row subframed">
                                        <div class="wire-image ascii-pfp"></div>
                                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
                                            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
                                            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
                                            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
                                            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat
                                            non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                                        </p>
                                    </div>
                                    <div class="c-row subframed">
                                        <ul>
                                            <li>Some facts:</li>
                                            <ul>
                                                <li>words about facts.</li>
                                                <li>facts about me.</li>
                                                <li>things for viewer to read.</li>
                                            </ul>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="c-controls">
                        <div class="c-sticker wireframed"></div>
                        <div class="c-tray wireframed"></div>
                        <div class="c-power">
                            <input type="checkbox" id="power-switch" />
                            <label for="power-switch" class="wireframed"></label>
                        </div>
                    </div>
                </div>
                <div class="m-row">
                    <div class="blog">
                        <div class="wire-image"></div>
                        <div class="content subframed">
                            <ul>
                                <li><a href="#">Hello World!</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="wireframed loadstats">
                        <h3>Load Stats</h3>
                        <div class="wireframed">
                            <table>
                                <tr>
                                    <td>First paint:</td>
                                    <td>0.2s</td>
                                </tr>
                                <tr>
                                    <td>Largest paint:</td>
                                    <td>0.3s</td>
                                </tr>
                                <tr>
                                    <td>Image load:</td>
                                    <td>0.5s</td>
                                </tr>
                                <tr>
                                    <td>Local Speed:</td>
                                    <td>30 Mbps</td>
                                </tr>
                                <tr>
                                    <td>Average Speed:</td>
                                    <td>120 Mbps</td>
                                </tr>
                            </table>
                            <div class="stats graph wireframed">
                                1
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <div class="test-output"></div>
    <script>
        const script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js';
        document.head.appendChild(script);

        script.onload = function () {
            (async function () {
                try {
                    const response = await fetch('https://ocelot.zip/api/package', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            username: "catci",
                            files: [
                                {
                                    path: "/files/catci/images/1765982450672-video.avif"
                                },
                                {
                                    path: "/video.avif"
                                }
                            ]
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const zipBlob = await response.blob();
                    const zip = new JSZip();
                    await zip.loadAsync(zipBlob);

                    const testOutput = document.querySelector('.test-output');
                    console.log('Files in zip:', Object.keys(zip.files));
                    
                    for (const filename in zip.files) {
                        const file = zip.files[filename];
                        console.log('Processing file:', filename, 'Is directory:', file.dir);
                        if (!file.dir) {
                            const blob = await file.async('blob');
                            console.log('Blob created for:', filename, 'Size:', blob.size);
                            const url = URL.createObjectURL(blob);
                            
                            const container = document.createElement('div');
                            const label = document.createElement('p');
                            label.textContent = filename;
                            
                            const img = document.createElement('img');
                            img.src = url;
                            img.style.maxWidth = '100%';
                            img.style.margin = '10px';
                            
                            container.appendChild(label);
                            container.appendChild(img);
                            testOutput.appendChild(container);
                            console.log('Added image to DOM for:', filename);
                        }
                    }

                    console.log('SUCCESS: Package downloaded and extracted successfully');

                } catch (error) {
                    console.log('FAILED: Package extraction failed -', error.message);
                }
            })();
        };
    </script>
</body>

</html>